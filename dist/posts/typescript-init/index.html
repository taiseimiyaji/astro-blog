<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>TypeScriptに入門する</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="

## はじめに
前回の記事同様直近の大きな課題感を感じているのはフロントエンド技術です。  
今回はその中でも最近主流となっているTypeScriptに入門してみます。  
私のエンジニア人生はC言語から始まっているので静的型付けで書け">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBD90YGZ4N"></script><link rel="stylesheet" href="/_astro/index.60e3b176.css" /><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","G-ZBD90YGZ4N");
</script></head>
  <!-- Google tag (gtag.js) -->
    
    
  <body>
    <main>
      <div class="header"><div class="title"><a href="/">Lyricrime.com</a></div><div class="header-link"><a href="/"><div> Blog</div></a><div>Activity</div><a href="/profile"><div>Profile</div></a></div></div>
      <div class="content">
        <div class="date">2022/12/25</div>
        <h1>TypeScriptに入門する</h1>
        <div class="post">
          <h2 id="はじめに">はじめに</h2>
<p>前回の記事同様直近の大きな課題感を感じているのはフロントエンド技術です。<br>
今回はその中でも最近主流となっているTypeScriptに入門してみます。<br>
私のエンジニア人生はC言語から始まっているので静的型付けで書けないJSに違和感をずっと感じていたため、個人開発等で導入し、ゆくゆくは社内のプロダクトもどんどん移行していきたいなと感じています。<br>
今回は備忘録としてJavaScriptの仕様含めたおさらい記事として残しておきます。</p>
<h2 id="typescriptとは">TypeScriptとは</h2>
<ul>
<li>Microsoftによって開発されているAltJSの一種</li>
<li>AltJSという言葉をあまり聞かなくなるくらい主流になっている</li>
<li>AltJS=JavaScriptの代替となる言語</li>
<li>静的型システムを備えているのが最大の特徴</li>
</ul>
<p>歴史的には最初のプレビュー版の公開が2012年の10月。<br>
バージョン1.0の公開、つまり正式リリースが2014年4月。</p>
<h3 id="静的型システムの例">静的型システムの例</h3>
<p>静的型システムとは、ざっくりいうと、変数や式が型をもつということ。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const str: string = "foobar";</span></span></code></pre>
<p>変数<code>str</code>はstring型を持っているという<code>型注釈</code>が書かれている</p>
<p>同時にTypeScriptは<code>型推論</code>という機能も充実している。
型推論とは、型注釈を書かなくてもTypeScriptが補って変数などの型を決めてくれる機能。</p>
<p>下記のコードは先程のコードから型注釈を省略したもの。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const str = "foobar";</span></span></code></pre>
<h3 id="型があるとなぜ嬉しいのか">型があるとなぜ嬉しいのか</h3>
<ul>
<li>型安全性</li>
<li>ドキュメント化</li>
</ul>
<p>型安全性とは、実行前にコンパイラが型チェックして検出してくれるしくみ。
コンパイラとは、プログラミング言語で書かれたコードを機械語に翻訳するための仕組みのこと。</p>
<p>コンパイラは、<code>構文が正しくない</code>エラーと<code>型チェックが失敗したこと</code>を表す型エラーの２種類のエラーを主に返すが、特にコンパイラによって型エラーを検出できるのが静的型付け言語の恩恵。</p>
<p>型エラーとは？<br>
型チェックの失敗は型に矛盾が発生した場合に起こる。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">function repeatHello(count: number): string {</span></span>
<span class="line"><span style="color: #c9d1d9">    return "hello".repeat(count)</span></span>
<span class="line"><span style="color: #c9d1d9">}</span></span>
<span class="line"><span style="color: #c9d1d9">// countはint型を期待しているが文字列型が入力されるためエラーが発生</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(repeatHello("wow"));</span></span></code></pre>
<p>ドキュメント化とは型の情報がソースコードに書かれることでプログラムを読解する助けになる、ということ。<br>
例えば、先程の例を見ると1行目を見るだけで関数<code>repeatHello</code>がnumber型の引数を受け取ってstring型の返り値を返すことがわかる。<br>
適切な関数名、コメントに加えて型の情報があればプログラムの読解時に関数の中身まで読む必要がなく、ある程度中身を推測しながら読み進める事ができる。<br>
これは特に大規模なシステム開発で効果を発揮する。</p>
<p>また、型の情報は人間の助けとなるだけでなくコンピュータにとっても助けとなる。IDEによる入力補完の恩恵をより受けられる。</p>
<p>静的とは、<code>実際にプログラムを実行しなくても行えるチェック</code>のこと。プログラムの文面だけを見て行われるチェック。<br>
反対に動的なチェックとは、<code>テスト</code>など実際にプログラムを実行してその結果を見てプログラムに間違いがないかを確認するもの。</p>
<p>TypeScriptはランタイム(実行時)の挙動が型情報に依存しないため、TypeScriptの持つ役割はあくまで静的なチェックのみ。</p>
<p><code>ランタイム(実行時)の挙動が型情報に依存しない</code>具体例</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">function double(value: number) {</span></span>
<span class="line"><span style="color: #c9d1d9">    console.log(value * 2);</span></span>
<span class="line"><span style="color: #c9d1d9">}</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">function double(value: string) {</span></span>
<span class="line"><span style="color: #c9d1d9">    console.log(value.repeat(2));</span></span>
<span class="line"><span style="color: #c9d1d9">}</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">double(123);</span></span>
<span class="line"><span style="color: #c9d1d9">double("hello");</span></span></code></pre>
<p>上記の様に、同名関数で引数の取る型が違うものを定義できるプログラミング言語が存在する。<br>
が、TypeScriptでは実行時の挙動は型情報に依存しないため、この機能は存在しない。あくまでTypeScriptはJavaScriptの拡張という立ち位置なので、役割を型チェックに絞ってランタイムの挙動はJavaScriptに従うという思想。　　</p>
<h3 id="トランスパイル">トランスパイル</h3>
<p>TypeScriptコンパイラの型チェック以外の役割として、トランスパイルという仕組みがある。</p>
<p>トランスパイルとは、TypeScriptコードをJavaScriptコードに変換するということ。(機械語ではなく他言語への変換なのでトランスパイルと呼ばれるが、単にコンパイルと呼ぶ場合もある)</p>
<p>TypeScript->JavaScriptへのトランスパイルは単に型注釈を取り除くだけの処理が行われる。つまり、TypeScriptは基本的にJavaScriptに型の概念を導入しただけなのでそれを取り除くだけで変換ができる。</p>
<h3 id="typescriptにおけるプリミティブ型">TypeScriptにおけるプリミティブ型</h3>
<p>プリミティブとは、「原始的な」という意味ので単語で、プログラミング言語における基本的な値を示す。</p>
<p>TypeScriptには以下のプリミティブ型がある。</p>
<ul>
<li>文字列</li>
<li>数値(number)</li>
<li>真偽値</li>
<li>BigInt</li>
<li>null</li>
<li>undefined</li>
<li>シンボル</li>
</ul>
<p>以降、最もよく使用される数値、文字列、真偽値についてJavaScriptの復習も兼ねて再確認する。</p>
<h3 id="数値number型">数値(number)型</h3>
<p>小数と整数の区別なく数値を扱える型。<br>
TypeScriptで欠かせない要素が<code>リテラル</code>という概念。<br>
リテラルとは、何らかの値を生み出すための式のこと。</p>
<p>数値リテラルとは、以下の<code>5</code>のようなもの</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const value = 5;</span></span></code></pre>
<p>他にも2進数や8進数、16進数のリテラルが良く使われる。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const binary = 0b1010; // 2進数リテラル</span></span>
<span class="line"><span style="color: #c9d1d9">const octal = 0o755; // 8進数リテラル</span></span>
<span class="line"><span style="color: #c9d1d9">const hexadecimal = 0xff; // 16進数リテラル</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">// 指数表記もリテラルが存在する</span></span>
<span class="line"><span style="color: #c9d1d9">const big = 1e8;</span></span>
<span class="line"><span style="color: #c9d1d9">const small = 4e-5;</span></span></code></pre>
<h3 id="文字列string型">文字列(string)型</h3>
<p>文字列リテラルにはダブルクォートとシングルクォートの２種類の書き方があるが、機能上の違いはない。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">const str1: string = 'Hello,world!';</span></span>
<span class="line"><span style="color: #c9d1d9">const str2 = "Hello,world!";</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span></code></pre>
<p>加えて、<code>テンプレートリテラル</code>ろいうリテラルも存在する。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">const message: string = `Hello</span></span>
<span class="line"><span style="color: #c9d1d9">world!`</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">const str1: string = "Hello";</span></span>
<span class="line"><span style="color: #c9d1d9">const str2: string = "world!";</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">console.log(`${str1},${str2}`); // "Hello,world!と表示"</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span></code></pre>
<p>普通の文字列リテラルとの違いは、</p>
<ul>
<li>リテラル中で改行が可能である</li>
<li>式を文字列の中に埋め込む事ができる</li>
</ul>
<h3 id="真偽値boolean型">真偽値(boolean)型</h3>
<p>trueとfalseの２つの値からなる型。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const no: boolean = false;</span></span>
<span class="line"><span style="color: #c9d1d9">const yes: boolean = true;</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">console.log(yes, no); // true falseと表示される</span></span></code></pre>
<h2 id="オブジェクトとは">オブジェクトとは</h2>
<p>TypeScriptにおけるオブジェクトは必ずしもクラスに由来するものではない。<br>
Java等の言語ではクラスとオブジェクトは切っても切り離せない関係にあるので、クラスに触れずにオブジェクトの話ができるTypeScriptはすこしギャップがある。</p>
<h3 id="オブジェクトは連想配列である">オブジェクトは<strong>連想配列</strong>である</h3>
<p>オブジェクトはいくつかの値をまとめたデータである。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const obj = {</span></span>
<span class="line"><span style="color: #c9d1d9">    foo: 123,</span></span>
<span class="line"><span style="color: #c9d1d9">    bar: "Hello,world!"</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">console.log(obj.foo);</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(obj.bar);</span></span></code></pre>
<p>変数<code>obj</code>に代入されている{}を<code>オブジェクトリテラル</code>と呼ぶ。<br>
また、<code>:</code>の後ろには固定された数値や文字列を書くだけでなく、変数の値を用いたり、プロパティの値を直接計算したりすることができる。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const user = {</span></span>
<span class="line"><span style="color: #c9d1d9">    name: input ? input : "名無し",</span></span>
<span class="line"><span style="color: #c9d1d9">    age: 20,</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span></code></pre>
<p>オブジェクトリテラルは、<code>プロパティ名: 変数名</code>という形の場合、かつプロパティ名と変数名が同じである場合は省略記法を使用することができる。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const name = input ? input: "名無し";</span></span>
<span class="line"><span style="color: #c9d1d9">const user = {</span></span>
<span class="line"><span style="color: #c9d1d9">    name: name,</span></span>
<span class="line"><span style="color: #c9d1d9">    age: 20,</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span></code></pre>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const name = input ? input: "名無し";</span></span>
<span class="line"><span style="color: #c9d1d9">const user = {</span></span>
<span class="line"><span style="color: #c9d1d9">    name,</span></span>
<span class="line"><span style="color: #c9d1d9">    age: 20,</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span></code></pre>
<h3 id="オブジェクトに対するconstの制限について">オブジェクトに対するconstの制限について</h3>
<p>constで宣言された変数に再代入することはできないが、オブジェクトのプロパティの書き換えはconstによって制限されない。</p>
<p>次の例のように、constで宣言された変数自体に別のオブジェクトを再代入する場合はエラーが発生する。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const user = {</span></span>
<span class="line"><span style="color: #c9d1d9">    name: "hoge",</span></span>
<span class="line"><span style="color: #c9d1d9">    age: 25,</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">const user = {</span></span>
<span class="line"><span style="color: #c9d1d9">    name: "fuga",</span></span>
<span class="line"><span style="color: #c9d1d9">    age: 15,</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span></code></pre>
<h3 id="スプレッド構文">スプレッド構文</h3>
<p>オブジェクトリテラル中では<code>スプレッド構文</code>を使用することができる。</p>
<p>オブジェクトの作成時にプロパティを別のオブジェクトからコピーする事ができる。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const obj1 = {</span></span>
<span class="line"><span style="color: #c9d1d9">    bar: 456,</span></span>
<span class="line"><span style="color: #c9d1d9">    baz: 789</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span>
<span class="line"><span style="color: #c9d1d9">const obj2 = {</span></span>
<span class="line"><span style="color: #c9d1d9">    foo: 123,</span></span>
<span class="line"><span style="color: #c9d1d9">    ...obj1</span></span>
<span class="line"><span style="color: #c9d1d9">};</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">// obj2 = {foo: 123, bar: 456, baz: 789}</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(obj2);</span></span></code></pre>
<p>既存のオブジェクトを拡張した別のオブジェクトを作りたい場合に有用。あくまでコピーなので、コピー元のオブジェクトのプロパティを変更してもコピー先には影響しない。</p>
<h3 id="オブジェクトの等価性">オブジェクトの等価性</h3>
<p>TypeScriptではオブジェクトが暗黙にコピーされることはなく、複数の変数に同じオブジェクトが入る場合が存在する。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const foo = { num: 1234 };</span></span>
<span class="line"><span style="color: #c9d1d9">const bar = foo;</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(bar.num); // 1234</span></span>
<span class="line"><span style="color: #c9d1d9"></span></span>
<span class="line"><span style="color: #c9d1d9">bar.num = 0;</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(foo.num); // 0</span></span></code></pre>
<p>上記の例では、変数<code>foo</code>と<code>bar</code>には同じオブジェクトが入っている。<br>
変数がそのオブジェクトの実体を専有しているとは限らず、他の場所で書き換えられる可能性がある。</p>
<p>下記の様に、明示的にオブジェクトをコピーすることで別のオブジェクトとして扱う事ができる。
1つめの方法がスプレッド構文を使用して次のように書く。</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">const foo = { num: 1234 };</span></span>
<span class="line"><span style="color: #c9d1d9">const bar = { ...foo };</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(bar.num); // 1234</span></span>
<span class="line"><span style="color: #c9d1d9">bar.num = 0;</span></span>
<span class="line"><span style="color: #c9d1d9">console.log(foo.num); // 1234(書き換えられていない)</span></span></code></pre>
<p>ただし、オブジェクトのプロパティの中に更にネストしてオブジェクトが入っている場合は同じオブジェクトのままなので注意が必要。</p>
<p>また、オブジェクトの比較には<code>===</code>を使用することができる。<br>
1つ目の例のように同じオブジェクトの場合はtrueとなり、２つ目の例のように中身が同じでも別々のオブジェクトの場合はfalseになる。</p>
<h2 id="まとめ">まとめ</h2>
<p>今回は名前と概要しか知らなかったTypeScriptに入門してみる記事でした。<br>
いざ勉強し始めるとその大部分はJavaScriptと同じことがわかってきて、よりハードルが下がった気がします。<br>
次回以降、TypeScriptならではの型について勉強していきたいと思います。<br>
また、実際にJavaScriptと比較してメリットを実感するために個人開発にも積極的に導入していこうと思います。</p>
        </div>
      </div>
      <div class="footer"><div class="copyright">©︎ 2023 taisei miyaji</div><div class="icons"><span class="github"><a href="https://github.com/taiseimiyaji" target="_blank"><img src="/github-mark/github-mark-white.png" width="100%" height="100%" alt="github"/></a></span></div></div>
    </main>
  </body></html>